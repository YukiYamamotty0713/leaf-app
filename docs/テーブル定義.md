# テーブル定義書

このドキュメントは、英単語学習アプリ「Leaf」で使用されるデータベースのテーブル構造を定義します。

## 1. テーブル一覧

* [users](#users-テーブル)
* [m\_part\_of\_speech](#m_part_of_speech-テーブル)

---

## 2. テーブル詳細

### `users` テーブル

ユーザー情報を格納するテーブルです。

| カラム名            | データ型                        | 制約/属性                 | 説明                       |
|-------------------|---------------------------------|---------------------------|----------------------------|
| `id`              | `BIGINT`                        | `PK`, `UN`, `AI`          | ユーザーID (主キー)          |
| `name`            | `VARCHAR(255)`                  |                           | ユーザー名                 |
| `role`            | `ENUM('user','admin','owner')`  |                           | ユーザー権限               |
| `email`           | `VARCHAR(255)`                  | (`UNIQUE` 制約推奨)      | メールアドレス             |
| `email_verified_at`| `TIMESTAMP`                     | `NULLABLE`                | メール認証日時             |
| `password`        | `VARCHAR(255)`                  |                           | ハッシュ化されたパスワード   |
| `remember_token`  | `VARCHAR(100)`                  | `NULLABLE`                | ログイン維持トークン       |
| `created_at`      | `TIMESTAMP`                     | `NULLABLE`                | レコード作成日時           |
| `updated_at`      | `TIMESTAMP`                     | `NULLABLE`                | レコード更新日時           |

**補足:**

* `PK`: Primary Key (主キー)
* `UN`: Unsigned (符号なし)
* `AI`: Auto Increment (自動増分)
* `email` カラムには通常 `UNIQUE` 制約が付与されます。
* `email_verified_at`, `remember_token`, `created_at`, `updated_at` は NULL値を許容します (Laravelの標準的な動作)。`created_at`, `updated_at` はEloquentによって自動的に管理されます。

---

### `m_part_of_speech` テーブル

品詞マスタ情報を格納するテーブルです。（`m_` プレフィックスはマスタデータを示す慣習）

| カラム名       | データ型         | 制約/属性          | 説明                    |
|----------------|------------------|--------------------|-------------------------|
| `id`           | `BIGINT`         | `PK`, `UN`, `AI`   | 品詞ID (主キー)         |
| `name`         | `VARCHAR(255)`   | (`UNIQUE` 制約推奨) | 品詞名 (例: 'noun', 'verb') |
| `created_at`   | `TIMESTAMP`      | `NULLABLE`         | レコード作成日時        |
| `updated_at`   | `TIMESTAMP`      | `NULLABLE`         | レコード更新日時        |

**補足:**

* `PK`: Primary Key (主キー)
* `UN`: Unsigned (符号なし)
* `AI`: Auto Increment (自動増分)
* `name` カラムには通常 `UNIQUE` 制約が付与されます。
* `created_at`, `updated_at` はEloquentによって自動的に管理されます。

---

## 3. ER図

データベース全体の関連を図示します。

```mermaid
erDiagram
    users {
        BIGINT id PK "ユーザーID"
        VARCHAR(255) name "ユーザー名"
        ENUM role "権限"
        VARCHAR(255) email "メールアドレス"
        TIMESTAMP email_verified_at "メール認証日時"
        VARCHAR(255) password "パスワード"
        VARCHAR(100) remember_token "ログイン維持トークン"
        TIMESTAMP created_at "作成日時"
        TIMESTAMP updated_at "更新日時"
    }

    m_part_of_speech {
        BIGINT id PK "品詞ID"
        VARCHAR(255) name "品詞名"
        TIMESTAMP created_at "作成日時"
        TIMESTAMP updated_at "更新日時"
    }

    %% --- Relationships ---
    %% 現状の定義では users と m_part_of_speech 間に直接的なリレーションは見当たりません。
    %% もし単語テーブル(m_words)などがあり、品詞を参照する場合は、以下のようにリレーションを追加します。
    %% m_words ||--o{ m_part_of_speech : "references"
    %% m_words ||--o{ users : "created_by"